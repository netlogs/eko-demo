# 图片URL上传演示 - 灵活输入版本 🎯

现在你的Chrome扩展已经升级为支持用户自定义输入的灵活版本！参考了eko官方示例的实现方式。

## ✅ 新增功能

### 🔧 用户自定义输入
- **文本输入框**: 可以在popup中输入任意任务描述
- **实时保存**: 输入内容会自动保存到本地存储
- **流式日志**: 支持实时流式输出和普通日志
- **停止功能**: 运行时可以随时停止任务

### ⚙️ 完整的配置页面
- **多LLM支持**: OpenAI、Claude、OpenRouter
- **自动配置**: 选择提供商后自动填充URL和默认模型
- **中文界面**: 完全本地化的中文配置界面
- **使用说明**: 内置详细的使用指南

## 🚀 使用方法

### 1. 配置API密钥
1. 右键扩展图标 → "选项" 
2. 选择你的LLM提供商(推荐OpenAI)
3. 输入API密钥
4. 点击"保存配置"

### 2. 灵活使用
点击扩展图标，在文本框中输入任意图片上传相关的任务：

#### 📝 示例任务描述

**基础图片上传：**
```
在当前网页找到文件上传框，从这个URL上传图片: https://picsum.photos/400/300
```

**社交媒体头像更换：**
```
1. 导航到个人设置页面
2. 找到头像上传区域  
3. 上传新头像: https://example.com/new-avatar.jpg
4. 保存更改
```

**批量图片处理：**
```
在图片编辑网站：
1. 上传原图: https://unsplash.com/photo-sample.jpg
2. 添加滤镜效果
3. 导出处理后的图片
```

**完整的工作流：**
```
1. 打开 imgur.com
2. 点击上传按钮
3. 从URL上传图片: https://picsum.photos/800/600
4. 添加标题："AI上传的测试图片"
5. 发布图片
```

## 🔄 与固定版本的对比

| 特性 | 原版本(固定) | 新版本(灵活) |
|------|-------------|-------------|
| 任务描述 | ❌ 写死在代码中 | ✅ 用户自定义输入 |
| 配置方式 | ❌ 硬编码配置 | ✅ 可视化配置页面 |
| 停止功能 | ❌ 无法停止 | ✅ 支持随时停止 |
| 日志显示 | ❌ 基础日志 | ✅ 流式+普通日志 |
| 任务保存 | ❌ 不保存 | ✅ 自动保存到本地 |
| 多模型支持 | ❌ 单一模型 | ✅ 支持多个LLM |

## 🎨 界面展示

### Popup界面 (主控制面板)
```
┌─────────────────────────────┐
│      图片URL上传演示         │
├─────────────────────────────┤
│ 任务描述：                   │
│ ┌─────────────────────────┐ │
│ │ 在当前网页找到文件上传框， │ │
│ │ 从这个URL上传图片:       │ │  
│ │ https://picsum.photos... │ │
│ │                         │ │
│ └─────────────────────────┘ │
│                             │
│ [        运行        ]      │
├─────────────────────────────┤
│ Logs:                       │
│ [09:30:15] 开始运行...       │
│ [09:30:16] 计划生成完成      │
│ [09:30:17] 正在执行...       │
└─────────────────────────────┘
```

### Options配置页面
```
┌─────────────────────────────────────┐
│       图片上传演示 - LLM配置          │
├─────────────────────────────────────┤
│ LLM提供商: [OpenAI (推荐) ▼]        │
│ API基础URL: https://api.openai.co.. │
│ 模型名称: [gpt-4o ▼]                │  
│ API密钥: [●●●●●●●●●●●●●●●●]          │
│                                     │
│ [        保存配置        ]           │
├─────────────────────────────────────┤
│ 使用说明：                           │
│ • 配置好API密钥后，就可以在popup中... │
│ • 支持任意图片上传相关的自然语言描述   │
│ • 例如："在当前网页找到文件上传框..." │
└─────────────────────────────────────┘
```

## 🛠️ 技术实现

### 主要变更
1. **popup/index.tsx**: 添加TextArea输入框和状态管理
2. **background/main.ts**: 新增主业务逻辑，支持动态prompt
3. **background/index.ts**: 简化为消息路由，支持停止功能
4. **options/index.tsx**: 完整的配置页面，支持多LLM

### 核心流程
```typescript
// 用户输入 → 保存状态 → 发送消息 → 执行任务
chrome.runtime.sendMessage({ 
  type: "run", 
  prompt: prompt.trim() 
});

// background接收并执行
eko = await main(request.prompt);
```

## 🎯 实际应用场景

现在你可以测试各种图片上传场景：

1. **网站测试**: 测试各种网站的文件上传功能
2. **社交媒体**: 自动更换头像、发布图片内容
3. **在线工具**: 自动使用图片编辑、压缩等在线工具
4. **电商平台**: 自动上传商品图片
5. **工作流自动化**: 将图片上传集成到复杂的工作流中

**构建成功！** 🎉 现在你有了一个完全灵活、可配置的图片上传演示工具。

可以在`dist`文件夹中找到构建好的扩展，直接加载到Chrome中使用！